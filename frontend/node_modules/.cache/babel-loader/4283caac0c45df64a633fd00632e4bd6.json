{"ast":null,"code":"import * as constants from '../constant';\nexport const registerUser = (data, onSuccess, onError) => ({\n  type: constants.API,\n  payload: {\n    method: 'POST',\n    url: '/api/ApplicationUser/Register',\n    data,\n    success: response => setUserInfo(response),\n    postProcessSuccess: onSuccess,\n    postProcessError: onError\n  }\n});\nexport const loginUser = (data, onSuccess, onError) => ({\n  type: constants.API,\n  payload: {\n    method: 'POST',\n    url: '/api/ApplicationUser/Login',\n    data,\n    success: response => setUserInfo(response),\n    postProcessSuccess: onSuccess,\n    postProcessError: onError\n  }\n});\nexport const logOutUser = () => {\n  localStorage.removeItem('USER_INFO');\n  return {\n    type: constants.RESET_USER_INFO\n  };\n};\n\nconst setUserInfo = data => {\n  const parsedToken = () => {\n    return JSON.parse(atob(data.token.split(\".\")[1]));\n  };\n\n  const userInfo = {\n    userId: parsedToken.id,\n    greeting: `${data.username} ${parsedToken.fullName}`,\n    token: data.token,\n    isLoggedIn: true\n  };\n  localStorage.setItem('USER_INFO', JSON.stringify(userInfo));\n  return {\n    type: constants.SET_USER_INFO,\n    payload: userInfo\n  };\n};","map":{"version":3,"sources":["E:/file project/OJT/TodoNew-Frontend/frontend/src/Redux/actions/authAction.js"],"names":["constants","registerUser","data","onSuccess","onError","type","API","payload","method","url","success","response","setUserInfo","postProcessSuccess","postProcessError","loginUser","logOutUser","localStorage","removeItem","RESET_USER_INFO","parsedToken","JSON","parse","atob","token","split","userInfo","userId","id","greeting","username","fullName","isLoggedIn","setItem","stringify","SET_USER_INFO"],"mappings":"AAAA,OAAO,KAAKA,SAAZ,MAA2B,aAA3B;AAIA,OAAO,MAAMC,YAAY,GAAG,CAACC,IAAD,EAAOC,SAAP,EAAkBC,OAAlB,MAA+B;AACvDC,EAAAA,IAAI,EAAEL,SAAS,CAACM,GADuC;AAEvDC,EAAAA,OAAO,EAAE;AACLC,IAAAA,MAAM,EAAG,MADJ;AAELC,IAAAA,GAAG,EAAG,+BAFD;AAGLP,IAAAA,IAHK;AAILQ,IAAAA,OAAO,EAAGC,QAAD,IAAeC,WAAW,CAACD,QAAD,CAJ9B;AAKLE,IAAAA,kBAAkB,EAAEV,SALf;AAMLW,IAAAA,gBAAgB,EAAGV;AANd;AAF8C,CAA/B,CAArB;AAaP,OAAO,MAAMW,SAAS,GAAG,CAACb,IAAD,EAAOC,SAAP,EAAkBC,OAAlB,MAA+B;AACpDC,EAAAA,IAAI,EAAGL,SAAS,CAACM,GADmC;AAEpDC,EAAAA,OAAO,EAAE;AACLC,IAAAA,MAAM,EAAE,MADH;AAELC,IAAAA,GAAG,EAAE,4BAFA;AAGLP,IAAAA,IAHK;AAILQ,IAAAA,OAAO,EAAEC,QAAD,IAAeC,WAAW,CAACD,QAAD,CAJ7B;AAKLE,IAAAA,kBAAkB,EAAEV,SALf;AAMLW,IAAAA,gBAAgB,EAAEV;AANb;AAF2C,CAA/B,CAAlB;AAYP,OAAO,MAAMY,UAAU,GAAG,MAAM;AAC5BC,EAAAA,YAAY,CAACC,UAAb,CAAwB,WAAxB;AACA,SAAO;AAACb,IAAAA,IAAI,EAAEL,SAAS,CAACmB;AAAjB,GAAP;AACH,CAHM;;AAKP,MAAMP,WAAW,GAAIV,IAAD,IAAU;AAE1B,QAAMkB,WAAW,GAAG,MAAM;AACtB,WAAOC,IAAI,CAACC,KAAL,CAAWC,IAAI,CAACrB,IAAI,CAACsB,KAAL,CAAWC,KAAX,CAAiB,GAAjB,EAAsB,CAAtB,CAAD,CAAf,CAAP;AACH,GAFD;;AAGA,QAAMC,QAAQ,GAAG;AACbC,IAAAA,MAAM,EAAEP,WAAW,CAACQ,EADP;AAEbC,IAAAA,QAAQ,EAAG,GAAE3B,IAAI,CAAC4B,QAAS,IAAGV,WAAW,CAACW,QAAS,EAFtC;AAGbP,IAAAA,KAAK,EAAEtB,IAAI,CAACsB,KAHC;AAIbQ,IAAAA,UAAU,EAAG;AAJA,GAAjB;AAMAf,EAAAA,YAAY,CAACgB,OAAb,CAAqB,WAArB,EAAkCZ,IAAI,CAACa,SAAL,CAAeR,QAAf,CAAlC;AACA,SAAO;AAACrB,IAAAA,IAAI,EAAEL,SAAS,CAACmC,aAAjB;AAAgC5B,IAAAA,OAAO,EAAEmB;AAAzC,GAAP;AACH,CAbD","sourcesContent":["import * as constants from '../constant'\r\n\r\n\r\n\r\nexport const registerUser = (data, onSuccess, onError) => ({\r\n    type: constants.API,\r\n    payload: {\r\n        method : 'POST', \r\n        url : '/api/ApplicationUser/Register', \r\n        data, \r\n        success: (response) => (setUserInfo(response)), \r\n        postProcessSuccess: onSuccess,      \r\n        postProcessError : onError\r\n    }\r\n\r\n});\r\n\r\nexport const loginUser = (data, onSuccess, onError) => ({\r\n    type : constants.API,\r\n    payload: {\r\n        method: 'POST',\r\n        url: '/api/ApplicationUser/Login',\r\n        data, \r\n        success:(response) => (setUserInfo(response)),\r\n        postProcessSuccess: onSuccess,\r\n        postProcessError: onError\r\n    }\r\n})\r\n\r\nexport const logOutUser = () => {\r\n    localStorage.removeItem('USER_INFO');\r\n    return {type: constants.RESET_USER_INFO};\r\n};\r\n\r\nconst setUserInfo = (data) => {\r\n    \r\n    const parsedToken = () => {\r\n        return JSON.parse(atob(data.token.split(\".\")[1]))\r\n    };\r\n    const userInfo = {\r\n        userId: parsedToken.id, \r\n        greeting: `${data.username} ${parsedToken.fullName}`,\r\n        token: data.token, \r\n        isLoggedIn : true \r\n    };\r\n    localStorage.setItem('USER_INFO', JSON.stringify(userInfo));\r\n    return {type: constants.SET_USER_INFO, payload: userInfo};\r\n};\r\n\r\n "]},"metadata":{},"sourceType":"module"}